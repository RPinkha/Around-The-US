!function(){"use strict";class e{constructor(e,t,s,i,r){this._name=e.name,this._link=e.link,this._id=e._id,this.isLiked=e.isLiked,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteClick=i,this._handleLikeClick=r}getId(){return this._id}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._imageElement.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)})),this._likeButton.addEventListener("click",(()=>{this._handleLikeClick(this)})),this._trashButton.addEventListener("click",(()=>{this._handleDeleteClick(this)}))}deleteCard(){this._element.remove(),this._element=null}toggleLikeCard(e){this.isLiked=e,this.renderLikeCard()}renderLikeCard(){this.isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}generateCard(){return this._element=this._getTemplate(),this._imageElement=this._element.querySelector(".card__image"),this._likeButton=this._element.querySelector(".card__like-button"),this._trashButton=this._element.querySelector(".card__trash-button"),this._setEventListeners(),this._imageElement.setAttribute("src",this._link),this._imageElement.setAttribute("alt",this._name),this._element.querySelector(".card__title").textContent=this._name,this.renderLikeCard(),this._element}}class t{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}rendererItems=()=>{this._items.reverse().forEach((e=>{this.addItem(this._renderer(e))}))};addItem=e=>{this._container.prepend(e)}}class s{constructor(e,t){let{inputSelector:s,submitButtonSelector:i,inactiveButtonClass:r,inputErrorClass:n,errorClass:o}=t;this._formElement=e,this._inputSelector=s,this._submitButtonSelector=i,this._inactiveButtonClass=r,this._inputErrorClass=n,this._errorClass=o,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}_showInputError=e=>{e.classList.add(this._inputErrorClass),this._errorElement.textContent=e.validationMessage,this._errorElement.classList.add(this._errorClass)};_hideInputError=e=>{e.classList.remove(this._inputErrorClass),this._errorElement.classList.remove(this._errorClass),this._errorElement.textContent=""};_checkInputValidity=e=>{this._errorElement=this._formElement.querySelector(`#${e.id}-error`),e.validity.valid?this._hideInputError(e):this._showInputError(e)};_hasInvalidInput=e=>e.some((e=>!e.validity.valid));_toggleButtonState=e=>{this._hasInvalidInput(e)?this.disableSubmit():(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))};_setEventListeners(){this._toggleButtonState(this._inputList),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState(this._inputList)}))}))}checkValidity(){this._inputList.forEach((e=>{this._checkInputValidity(e),this._toggleButtonState(this._inputList)}))}enableValidation(){this._setEventListeners()}disableSubmit(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}resetForm(){this._formElement.reset()}}class i{constructor(e){this._modalElement=document.querySelector(e)}open(){this._modalElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close=()=>{this._modalElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)};_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._closeButton=this._modalElement.querySelector(".modal__close"),this._closeButton.addEventListener("click",this.close),this._modalElement.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&this.close()}))}}class r extends i{constructor(e,t,s){let{formSelector:i,submitButtonSelector:r}=s;super(e),this._form=this._modalElement.querySelector(i),this._formSubmit=t,this._button=this._modalElement.querySelector(r),this._originalButtonText=this._button.textContent,this._inputList=Array.from(this._form.querySelectorAll(".modal__input"))}renderSaving(e){this._button.textContent=e?"Saving...":this._originalButtonText}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._formSubmit(t)})),super.setEventListeners()}}const n={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_active",formSelector:".modal__form"},o=document.querySelector(".profile"),a=o.querySelector(".profile__edit-button"),l=o.querySelector(".profile__add-button"),c=o.querySelector(".profile__photo-button"),h=document.querySelector("#modal-profile-edit"),d=Array.from(h.querySelectorAll(".modal__input")),_=Array.from(document.querySelectorAll(n.formSelector)),u={};let m;const p=new class{constructor(e){let{nameSelector:t,descriptionSelector:s,avatarSelector:i}=e;this._nameElement=document.querySelector(t),this._descriptionElement=document.querySelector(s),this._avatarElement=document.querySelector(i)}getUserInfo(){const e={};return e.name=this._nameElement.textContent,e.description=this._descriptionElement.textContent,e}setUserInfo(e){this._nameElement.textContent=e.name,this._descriptionElement.textContent=e.description}setUserAvatar(e){this._avatarElement.setAttribute("src",e)}}({nameSelector:".profile__name",descriptionSelector:".profile__description",avatarSelector:".profile__photo"}),E=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error :${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then((e=>this._checkResponse(e)))}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>this._checkResponse(e)))}editProfile(e){let{name:t,description:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then((e=>this._checkResponse(e)))}addCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then((e=>this._checkResponse(e)))}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>this._checkResponse(e)))}likeCard(e,t){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers}).then((e=>this._checkResponse(e)))}changeAvatar(e){let{link:t}=e;return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((e=>this._checkResponse(e)))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"739decfe-71be-4d0d-8961-a71a0f6cba52","Content-Type":"application/json"}});function v(t){return new e(t,"#card",y,C,L).generateCard()}E.getUserInfo().then((e=>{p.setUserInfo({name:e.name,description:e.about}),p.setUserAvatar(e.avatar)})).catch((e=>console.log(e))),E.getInitialCards().then((e=>{m=new t({items:e,renderer:v},".cards__list"),m.rendererItems()})).catch((e=>console.log(e))),_.forEach((e=>{const t=new s(e,n),i=e.getAttribute("name");t.enableValidation(),u[i]=t}));const g=new class extends i{constructor(e,t){let{submitButtonSelector:s}=t;super(e),this._button=this._modalElement.querySelector(s),this._originalButtonText=this._button.textContent}renderSaving(e){this._button.textContent=e?"Saving...":this._originalButtonText}setCallback(e){this._callback=e}setEventListeners(){this._button.addEventListener("click",(()=>{this._callback()})),super.setEventListeners()}}("#modal-confirm-delete",n),S=new r("#modal-change-picture",(function(e){S.renderSaving(!0),E.changeAvatar(e).then((e=>{p.setUserAvatar(e.avatar)})).catch((e=>console.log(e))).finally(S.renderSaving(!1)),S.close()}),n),b=new r("#modal-profile-edit",(function(e){b.renderSaving(!0),E.editProfile(e).then((e=>{p.setUserInfo({name:e.name,description:e.about})})).catch((e=>console.log(e))).finally(b.renderSaving(!1)),b.close()}),n),f=new r("#modal-add-card",(function(e){f.renderSaving(!0),E.addCard(e).then((e=>{const t=v(e);m.addItem(t)})).catch((e=>console.log(e))).finally(f.renderSaving(!1)),u.addCardForm.resetForm(),u.addCardForm.disableSubmit(),f.close()}),n),k=new class extends i{constructor(e){super(e),this._previewImage=this._modalElement.querySelector(".modal__image"),this._previewImageTitle=this._modalElement.querySelector(".modal__image-title")}open(e){let{name:t,link:s}=e;this._previewImage.setAttribute("src",s),this._previewImage.setAttribute("alt",t),this._previewImageTitle.textContent=t,super.open()}}("#image-preview-modal");function C(e){g.open(),g.setCallback((()=>{E.deleteCard(e.getId()).catch((e=>console.log(e))),e.deleteCard(),g.close()}))}function L(e){E.likeCard(e.getId(),e.isLiked).then((t=>e.toggleLikeCard(t.isLiked))).catch((e=>console.log(e)))}function y(e,t){k.open({name:e,link:t})}a.addEventListener("click",(()=>{!function(){const e=p.getUserInfo();d[0].value=e.name,d[1].value=e.description}(),u.profileForm.checkValidity(),b.open()})),l.addEventListener("click",(()=>f.open())),c.addEventListener("click",(()=>S.open())),b.setEventListeners(),f.setEventListeners(),k.setEventListeners(),S.setEventListeners(),g.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SixLQUFLMEwsY0FBYzVKLGFBQWEsTUFBTzVCLEdBQ3ZDRixLQUFLMkwsbUJBQW1CNUosWUFBYzdCLEVBQ3RDa0csTUFBTWIsTUFDUixHSnlGc0Msd0JBR3hDLFNBQVN6RixFQUFrQjhMLEdBQ3pCYixFQUF3QnhGLE9BQ3hCd0YsRUFBd0JDLGFBQVksS0FDbEN6QyxFQUFJakgsV0FBV3NLLEVBQUtqTCxTQUFTNEosT0FBT0MsR0FBUUMsUUFBUUMsSUFBSUYsS0FDeERvQixFQUFLdEssYUFDTHlKLEVBQXdCdEYsT0FBTyxHQUVuQyxDQUdBLFNBQVMxRixFQUFnQjZMLEdBQ3ZCckQsRUFDR3lCLFNBQVM0QixFQUFLakwsUUFBU2lMLEVBQUt0TCxTQUM1QitJLE1BQU1QLEdBQVE4QyxFQUFLbkssZUFBZXFILEVBQUl4SSxXQUN0Q2lLLE9BQU9DLEdBQVFDLFFBQVFDLElBQUlGLElBQ2hDLENBZ0RBLFNBQVMzSyxFQUFpQkssRUFBTUUsR0FDOUJxTCxFQUFhbEcsS0FBSyxDQUFFckYsT0FBTUUsUUFDNUIsQ0FVQStHLEVBQVdoRyxpQkFBaUIsU0FBUyxNQVByQyxXQUNFLE1BQU1nSCxFQUFrQlIsRUFBU08sY0FDakNYLEVBQWlCLEdBQUdULE1BQVFxQixFQUFnQmpJLEtBQzVDcUgsRUFBaUIsR0FBR1QsTUFBUXFCLEVBQWdCQyxXQUM5QyxDQUlFeUQsR0FDQXBFLEVBQWVxRSxZQUFZOUcsZ0JBQzNCcUcsRUFBaUI5RixNQUFNLElBSXpCNkIsRUFBVWpHLGlCQUFpQixTQUFTLElBQU1tSyxFQUFjL0YsU0FHeEQ4QixFQUFrQmxHLGlCQUFpQixTQUFTLElBQU1nSyxFQUFnQjVGLFNBR2xFOEYsRUFBaUJ4RixvQkFHakJ5RixFQUFjekYsb0JBR2Q0RixFQUFhNUYsb0JBR2JzRixFQUFnQnRGLG9CQUdoQmtGLEVBQXdCbEYsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Nb2RhbC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Nb2RhbFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Nb2RhbFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvTW9kYWxXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tQ0FSRCBDT05TVFJVQ1RPUi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxuICBjb25zdHJ1Y3RvcihcbiAgICBkYXRhLFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxuICAgIGhhbmRsZUxpa2VDbGlja1xuICApIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLmlzTGlrZWQgPSBkYXRhLmlzTGlrZWQ7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICB9XG5cbiAgLy8tLS0tLS0tLS0tLU1FVEhPRCBUTyBHRVQgVEhFIENBUkQgRUxFTUVOVCBPVVQgT0YgVEhFIFRFTVBMQVRFLS0tLS0tLS0tLS0tLS0+PlxuICBnZXRJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faWQ7XG4gIH1cblxuICAvLy0tLS0tLS0tLS0tTUVUSE9EIFRPIEdFVCBUSEUgQ0FSRCBFTEVNRU5UIE9VVCBPRiBUSEUgVEVNUExBVEUtLS0tLS0tLS0tLS0tLT4+XG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICAvLy0tLS0tLS0tLS0tTUVUSE9EIFRPIEFERCBFVkVOVCBMSVNURU5FUlMgQVNTT0NJQVRFRCBXSVRIIFRIRSBDQVJELS0tLS0tLS0tLS0+PlxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8tLS0tLS0tLS0tLUlNQUdFIEVMRU1FTlQgQ0xJQ0sgRVZFTlQgTElTVEVORVItLS0tLS0tLS0tLT4+XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xuICAgIH0pO1xuXG4gICAgLy8tLS0tLS0tLS0tLUxJS0UgQlVUVE9OIENMSUNLIEVWRU5UIExJU1RFTkVSLS0tLS0tLS0tLS0tPj5cbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcyk7XG4gICAgfSk7XG5cbiAgICAvLy0tLS0tLS0tLS0tVFJBU0ggQlVUVE9OIENMSUNLIEVWRU5UIExJU1RFTkVSLS0tLS0tLS0tLS0+PlxuICAgIHRoaXMuX3RyYXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh0aGlzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vLS0tLS0tLS0tLS1NRVRIT0QgVE8gSEFORExFIENBUkQgVFJBU0ggQlVUVE9OIENMSUNLLS0tLS0tLS0tLS0+PlxuICBkZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gIH1cblxuICAvLy0tLS0tLS0tLS0tTUVUSE9EIFRPIEhBTkRMRSBDQVJEIExJS0UgQlVUVE9OIENMSUNLLS0tLS0tLS0tLS0+PlxuICB0b2dnbGVMaWtlQ2FyZChpc0xpa2VkKSB7XG4gICAgdGhpcy5pc0xpa2VkID0gaXNMaWtlZDtcbiAgICB0aGlzLnJlbmRlckxpa2VDYXJkKCk7XG4gIH1cblxuICByZW5kZXJMaWtlQ2FyZCgpIHtcbiAgICB0aGlzLmlzTGlrZWRcbiAgICAgID8gdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpXG4gICAgICA6IHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIC8vLS0tLS0tLS0tLS0tLS1NRVRIT0QgVE8gUE9QVUxBVEUgVEhFIENBUkQgRUxFTUVOVC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl90cmFzaEJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaC1idXR0b25cIik7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgdGhpcy5fbGluayk7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNldEF0dHJpYnV0ZShcImFsdFwiLCB0aGlzLl9uYW1lKTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMucmVuZGVyTGlrZUNhcmQoKTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS1TRUNUSU9OIENPTlNUUlVDVE9SLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2xhc3NTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNsYXNzU2VsZWN0b3IpO1xuICB9XG5cbiAgLy8tLS0tLS0tLU1FVEhPRCBUSEFUIElUVEVSQVRFUyBPVkVSIFRIRSBJVEVNUyBBUlJBWSBBTkQgUkVOREVSUyBUSEVNLS0tLS0tLS0tLT4+XG4gIHJlbmRlcmVySXRlbXMgPSAoKSA9PiB7XG4gICAgdGhpcy5faXRlbXMucmV2ZXJzZSgpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuYWRkSXRlbSh0aGlzLl9yZW5kZXJlcihpdGVtKSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8tLS0tLS0tTUVUSE9EIFRIQVQgVEFLRVMgQSBET00gRUxFTUVOVCBBTkQgQUREUyBJVCBUTyBUSEUgQ09OVEFJTkVSLS0tLS0tLS0tLT4+XG4gIGFkZEl0ZW0gPSAoZWxlbWVudCkgPT4ge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9O1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tRk9STSBWQUxJREFUT1IgQ09OU1RSVUNUT1ItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxuICBjb25zdHJ1Y3RvcihcbiAgICBmb3JtRWxlbWVudCxcbiAgICB7XG4gICAgICBpbnB1dFNlbGVjdG9yLFxuICAgICAgc3VibWl0QnV0dG9uU2VsZWN0b3IsXG4gICAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzLFxuICAgICAgaW5wdXRFcnJvckNsYXNzLFxuICAgICAgZXJyb3JDbGFzcyxcbiAgICB9XG4gICkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBpbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGVycm9yQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG5cbiAgLy8tLS0tLS0tLS0tLU1FVEhPRCBUSEFUIFNIT1dTIFRIRSBJTlBVVCBFUlJPUi0tLS0tLS0tLS0tLS0tPj5cbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9O1xuXG4gIC8vLS0tLS0tLS0tLS1NRVRIT0QgVEhBVCBISURFUyBUSEUgSU5QVVQgRVJST1ItLS0tLS0tLS0tLS0tLT4+XG4gIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH07XG5cbiAgLy8tLS0tLS0tLS0tLU1FVEhPRCBUSEFUIENIRUNLUyBFQUNIIEVMRU1FTlQgRk9SIFZBTElESVRZLS0tLS0tLS0tLS0tLS0+PlxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICAvLy0tLS0tLS0tLS0tTUVUSE9EIFRPIENIRUNLIElGIEFMTCBJTlBVVCBFTEVNRU5UUyBBUkUgVkFMSUQtLS0tLS0tLS0tLS0tLT4+XG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vLS0tLS0tLS0tLS1NRVRIT0QgVEhBVCBUT0dHTEVTIFRIRSBTVUJNSVQgQlVUVE9OLS0tLS0tLS0tLS0tLS0+PlxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0KSA9PiB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgICB0aGlzLmRpc2FibGVTdWJtaXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICB9XG4gIH07XG5cbiAgLy8tLS0tLS0tLS0tLU1FVEhPRCBUSEFUIFNFVFMgRVZFTlQgTElTVEVORVJTIE9OIFRIRSBJTlBVVCBFTEVNRU5UUy0tLS0tLS0tLS0tLS0tPj5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dExpc3QpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvLy0tLS0tLS0tLS0tLS0tLS0tTUVUSE9EIFRPIFJFQ0hFQ0sgVkFMSURBVElPTi0tLS0tLS0tLS0tLS0tLS0tLT4+XG4gIGNoZWNrVmFsaWRpdHkoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dExpc3QpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1NRVRIT0QgVE8gRU5BQkxFIFZBTElEQVRJT04tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS1NRVRIT0QgVE8gRElBQkxFIFRIRSBTVUJNSVQgQlVUVE9OLS0tLS0tLS0tLS0tLS0tLS0tPj5cbiAgZGlzYWJsZVN1Ym1pdCgpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgfVxuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS1NRVRIT0QgVE8gUkVTRVQgVEhFIEZPUk0tLS0tLS0tLS0tLS0tLS0tLS0+PlxuICByZXNldEZvcm0oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWwge1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLU1PREFMIENPTlNUUlVDVE9SLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3Rvcikge1xuICAgIHRoaXMuX21vZGFsRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobW9kYWxTZWxlY3Rvcik7XG4gIH1cblxuICAvLy0tLS0tLS0tTUVUSE9EIFRIQVQgSVRURVJBVEVTIE9WRVIgVEhFIElURU1TIEFSUkFZIEFORCBSRU5ERVJTIFRIRU0tLS0tLS0tLS0tPj5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgLy8tLS0tLS0tTUVUSE9EIFRIQVQgVEFLRVMgQSBET00gRUxFTUVOVCBBTkQgQUREUyBJVCBUTyBUSEUgQ09OVEFJTkVSLS0tLS0tLS0tLT4+XG4gIGNsb3NlID0gKCkgPT4ge1xuICAgIHRoaXMuX21vZGFsRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH07XG5cbiAgLy8tLS0tLS0tTUVUSE9EIFRIQVQgQ0xPU0VTIE1PREFMIFdJVEggUFJFU1MgT0YgRVNDQVBFLS0tLS0tLS0tLT4+XG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICAvLy0tLS0tTUVUSE9EIFRIQVQgQUREUyBBIENMSUNLIEVWRU5UIExJU1RFTkVSIFRPIFRIRSBDTE9TRSBJQ09OLS0tLS0tPj5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xuICAgIHRoaXMuX21vZGFsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBNb2RhbCBmcm9tIFwiLi9Nb2RhbC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhGb3JtIGV4dGVuZHMgTW9kYWwge1xuICAvLy0tLS0tLS0tLS0tLS0tLU1PREFMV0lUSEZPUk0gQ09OU1RSVUNUT1ItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxuICBjb25zdHJ1Y3RvcihcbiAgICBtb2RhbFNlbGVjdG9yLFxuICAgIGZvcm1TdWJtaXQsXG4gICAgeyBmb3JtU2VsZWN0b3IsIHN1Ym1pdEJ1dHRvblNlbGVjdG9yIH1cbiAgKSB7XG4gICAgc3VwZXIobW9kYWxTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybVN1Ym1pdCA9IGZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX29yaWdpbmFsQnV0dG9uVGV4dCA9IHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIikpO1xuICB9XG5cbiAgLy8tLS0tLS0tLS0tLS1NRVRIT0QgVEhBVCBDSEFOR0VTIFRIRSBCVVRUT04gVEVYVC0tLS0tLS0tLS0tLS0tPj5cbiAgcmVuZGVyU2F2aW5nKGlzU2F2aW5nKSB7XG4gICAgaXNTYXZpbmdcbiAgICAgID8gKHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCIpXG4gICAgICA6ICh0aGlzLl9idXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9vcmlnaW5hbEJ1dHRvblRleHQpO1xuICB9XG5cbiAgLy8tLS0tLS0tLS0tLS1NRVRIT0QgVEhBVCBDT0xMRUNUUyBUSEUgSU5QVVQgVkFMVUVTLS0tLS0tLS0tLS0tLS0+PlxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG4gIC8vLS0tLS0tLS1BRERTIEZVTkNUSU9OQUxJVFkgVE8gVEhFIFNFVEVWRU5UTElTVEVORVJTIE1FVEhPRC0tLS0tLS0tLS0+PlxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuICAgICAgdGhpcy5fZm9ybVN1Ym1pdCh2YWx1ZXMpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsIi8vLS0tLS0tLS0tLS0tLS0tLS0tLS1PQkpFQ1QgV0lUSCBDT05GSUcgU0VUVElOR1MtLS0tLS0tLS0tLS0tLS0tLS0tLT4+XG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl9hY3RpdmVcIixcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxufTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tQ1JFQVRJTkcgQlVUVE9OUyBQUk9GSUxFIEVMRU1FTlRTLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxuY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZVwiKTtcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGFkZEJ1dHRvbiA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGVkaXRQaWN0dXJlQnV0dG9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19waG90by1idXR0b25cIlxuKTtcblxuLy8tLS0tLS0tLS0tLURFRklOSU5HIEFOIEFSUkFZIE9GIEFMTCBQUk9GSUxFIEVESVQgSU5QVVRTLS0tLS0tLS0tLS0tLS0tPj5cbmNvbnN0IG1vZGFsUHJvZmlsZUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLXByb2ZpbGUtZWRpdFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlSW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgbW9kYWxQcm9maWxlRWRpdC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKVxuKTtcblxuLy8tLS0tLS0tLS0tLURFRklOSU5HIEFOIEFSUkFZIE9GIEFMTCBGT1JNIEVMRU1FTlRTLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxuZXhwb3J0IGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKVxuKTtcblxuLy8tLS0tLS0tLS0tLURFRklOSU5HIEFOIEVNUFRZIE9CSkVDVCBGT1IgQUxMIFRIRSBGT1JNUy0tLS0tLS0tLS0tLS0tLS0tPj5cbmV4cG9ydCBjb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG4vLy0tLS0tLS0tLS0tREVGSU5JTkcgVEhFIEFQSSBPQkpFQ1QtLS0tLS0tLS0tLS0tLS0tLT4+XG5leHBvcnQgY29uc3Qgb3B0aW9ucyA9IHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI3MzlkZWNmZS03MWJlLTRkMGQtODk2MS1hNzFhMGY2Y2JhNTJcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn07XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IE1vZGFsV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvTW9kYWxXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IE1vZGFsV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgTW9kYWxXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCB7XG4gIGNvbmZpZyxcbiAgZWRpdEJ1dHRvbixcbiAgYWRkQnV0dG9uLFxuICBlZGl0UGljdHVyZUJ1dHRvbixcbiAgcHJvZmlsZUlucHV0TGlzdCxcbiAgZm9ybUxpc3QsXG4gIGZvcm1WYWxpZGF0b3JzLFxuICBvcHRpb25zLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLURFRklOSU5HIENBUkRTQ09OVEFJTkVSLS0tLS0tLS0tLS0tLS0tLS0+PlxubGV0IGNhcmRzQ29udGFpbmVyO1xuXG4vLy0tLS0tLS0tLS0tQ1JFQVRFIEEgTkVXIENMQVNTIElOU1RBTkNFIEZPUiBUSEUgVVNFUiBJTkZPLS0tLS0tLS0tLS0tPj5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG4gIGF2YXRhclNlbGVjdG9yOiBcIi5wcm9maWxlX19waG90b1wiLFxufSk7XG5cbi8vLS0tLS0tLS0tLS1DUkVBVEUgQSBORVcgQ0xBU1MgSU5TVEFOQ0UgRk9SIFRIRSBBUEktLS0tLS0tLS0tLS0+PlxuY29uc3QgYXBpID0gbmV3IEFwaShvcHRpb25zKTtcblxuLy8tLS0tLS0tLS0tLUdFVCBUSEUgVVNFUiBJTkZPUk1BVElPTiBGUk9NIFRIRSBBUEktLS0tLS0tLS0tLS0+PlxuYXBpXG4gIC5nZXRVc2VySW5mbygpXG4gIC50aGVuKChyZXMpID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICBuYW1lOiByZXMubmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uOiByZXMuYWJvdXQsXG4gICAgfSk7XG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihyZXMuYXZhdGFyKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuXG4vLy0tLS0tLS0tLS0tR0VUIFRIRSBJTklUSUFMIENBUkRTIEZST00gVEhFIEFQSS0tLS0tLS0tLS0tLT4+XG5hcGlcbiAgLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKChyZXMpID0+IHtcbiAgICAvLy0tLS0tLS0tLS0tQ1JFQVRFIEEgTkVXIENMQVNTIElOU1RBTkNFIEZPUiBUSEUgQ0FSRFMgQ09OVEFJTkVSLS0tLS0tLS0tLS0tPj5cbiAgICBjYXJkc0NvbnRhaW5lciA9IG5ldyBTZWN0aW9uKFxuICAgICAgeyBpdGVtczogcmVzLCByZW5kZXJlcjogcmVuZGVyQ2FyZCB9LFxuICAgICAgXCIuY2FyZHNfX2xpc3RcIlxuICAgICk7XG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tQ0FMTCBSRU5ERVJFUiBNRVRIT0QgT04gQ0FSRFNDT05UQUlORVItLS0tLS0tLS0tLS0tLS0tLS0tPj5cbiAgICBjYXJkc0NvbnRhaW5lci5yZW5kZXJlckl0ZW1zKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLUZPUk0gVkFMSURBVE9SIENSRUFUT1IgQU5EIEVOQUJMSU5HLS0tLS0tLS0tLS0tLS0tLS0tPj5cbmZvcm1MaXN0LmZvckVhY2goKGZvcm0pID0+IHtcbiAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybSwgY29uZmlnKTtcbiAgY29uc3QgZm9ybU5hbWUgPSBmb3JtLmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG4gIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbn0pO1xuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tUkVOREVSIENBUkQgRlVOQ1RJT04tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICBjYXJkRGF0YSxcbiAgICBcIiNjYXJkXCIsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICBoYW5kbGVEZWxldGVDbGljayxcbiAgICBoYW5kbGVMaWtlQ2xpY2tcbiAgKTtcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG59XG5cbi8vLS0tLS1DUkVBVEUgQSBNT0RBTFdJVEhDT05GSVJNQVRJT04gSU5TVEFOQ0UgRk9SIENBUkQgREVMRVRFIENPTkZJUk1BVElPTi0tLS0tLS0tLS0tLT4+XG5jb25zdCBkZWxldGVDb25maXJtYXRpb25Nb2RhbCA9IG5ldyBNb2RhbFdpdGhDb25maXJtYXRpb24oXG4gIFwiI21vZGFsLWNvbmZpcm0tZGVsZXRlXCIsXG4gIGNvbmZpZ1xuKTtcblxuLy8tLS0tLS0tLS0tLUNSRUFURSBBIE1PREFMV0lUSEZPUk0gSU5TVEFOQ0UgRk9SIFRIRSBDSEFOR0UgUElDVFVSRS0tLS0tLS0tLS0tLT4+XG5jb25zdCBhdmF0YXJFZGl0TW9kYWwgPSBuZXcgTW9kYWxXaXRoRm9ybShcbiAgXCIjbW9kYWwtY2hhbmdlLXBpY3R1cmVcIixcbiAgaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdCxcbiAgY29uZmlnXG4pO1xuXG4vLy0tLS0tLS0tLS0tQ1JFQVRFIEEgTU9EQUxXSVRIRk9STSBJTlNUQU5DRSBGT1IgVEhFIFBST0ZJTEUgRURJVC0tLS0tLS0tLS0tLT4+XG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gbmV3IE1vZGFsV2l0aEZvcm0oXG4gIFwiI21vZGFsLXByb2ZpbGUtZWRpdFwiLFxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCxcbiAgY29uZmlnXG4pO1xuXG4vLy0tLS0tLS0tLS0tQ1JFQVRFIEEgTU9EQUxXSVRIRk9STSBJTlNUQU5DRSBGT1IgVEhFIEFERCBJTUFHRS0tLS0tLS0tLS0tLT4+XG5jb25zdCBhZGRJbWFnZU1vZGFsID0gbmV3IE1vZGFsV2l0aEZvcm0oXG4gIFwiI21vZGFsLWFkZC1jYXJkXCIsXG4gIGhhbmRsZUFkZEltYWdlRm9ybVN1Ym1pdCxcbiAgY29uZmlnXG4pO1xuXG4vLy0tLS0tLS0tLS0tQ1JFQVRFIEEgTU9EQUxXSVRISU1BR0UgSU5TVEFOQ0UgRk9SIFRIRSBQUkVWSUVXIElNQUdFLS0tLS0tLS0tLS0tPj5cbmNvbnN0IHByZXZpZXdNb2RhbCA9IG5ldyBNb2RhbFdpdGhJbWFnZShcIiNpbWFnZS1wcmV2aWV3LW1vZGFsXCIpO1xuXG4vLy0tLS0tLS0tLS0tQ1JFQVRFIEEgRlVOQ1RJT04gVEhBVCBIQU5ETEVTIERFTEVURSBDTElDSy0tLS0tLS0tLS0tLT4+XG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDbGljayhjYXJkKSB7XG4gIGRlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsLm9wZW4oKTtcbiAgZGVsZXRlQ29uZmlybWF0aW9uTW9kYWwuc2V0Q2FsbGJhY2soKCkgPT4ge1xuICAgIGFwaS5kZWxldGVDYXJkKGNhcmQuZ2V0SWQoKSkuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgZGVsZXRlQ29uZmlybWF0aW9uTW9kYWwuY2xvc2UoKTtcbiAgfSk7XG59XG5cbi8vLS0tLS0tLS0tLS1DUkVBVEUgQSBGVU5DVElPTiBUSEFUIEhBTkRMRVMgTElLRSBDTElDSy0tLS0tLS0tLS0tLT4+XG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2xpY2soY2FyZCkge1xuICBhcGlcbiAgICAubGlrZUNhcmQoY2FyZC5nZXRJZCgpLCBjYXJkLmlzTGlrZWQpXG4gICAgLnRoZW4oKHJlcykgPT4gY2FyZC50b2dnbGVMaWtlQ2FyZChyZXMuaXNMaWtlZCkpXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xufVxuXG4vLy0tLS0tLS0tLS0tQ1JFQVRFIEEgRlVOQ1RJT04gVEhBVCBIQU5ETEVTIEFWQVRBUiBFRElUIFNVQk1JVC0tLS0tLS0tLS0tLT4+XG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KHZhbHVlcykge1xuICBhdmF0YXJFZGl0TW9kYWwucmVuZGVyU2F2aW5nKHRydWUpO1xuICBhcGlcbiAgICAuY2hhbmdlQXZhdGFyKHZhbHVlcylcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlcy5hdmF0YXIpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgLmZpbmFsbHkoYXZhdGFyRWRpdE1vZGFsLnJlbmRlclNhdmluZyhmYWxzZSkpO1xuICBhdmF0YXJFZGl0TW9kYWwuY2xvc2UoKTtcbn1cblxuLy8tLS0tLS0tLS0tLUNSRUFURSBBIEZVTkNUSU9OIFRIQVQgSEFORExFUyBQUk9GSUxFIEVESVQgU1VCTUlULS0tLS0tLS0tLS0tPj5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KHZhbHVlcykge1xuICBwcm9maWxlRWRpdE1vZGFsLnJlbmRlclNhdmluZyh0cnVlKTtcbiAgYXBpXG4gICAgLmVkaXRQcm9maWxlKHZhbHVlcylcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICAgIG5hbWU6IHJlcy5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogcmVzLmFib3V0LFxuICAgICAgfSk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAuZmluYWxseShwcm9maWxlRWRpdE1vZGFsLnJlbmRlclNhdmluZyhmYWxzZSkpO1xuICBwcm9maWxlRWRpdE1vZGFsLmNsb3NlKCk7XG59XG5cbi8vLS0tLS0tLS0tLS0tQ1JFQVRFIEEgRlVOQ1RJT04gVEhBVCBIQU5ETEVTIEFERCBJTUFHRSBTVUJNSVQtLS0tLS0tLS0tPj5cbmZ1bmN0aW9uIGhhbmRsZUFkZEltYWdlRm9ybVN1Ym1pdCh2YWx1ZXMpIHtcbiAgYWRkSW1hZ2VNb2RhbC5yZW5kZXJTYXZpbmcodHJ1ZSk7XG4gIGFwaVxuICAgIC5hZGRDYXJkKHZhbHVlcylcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBjb25zdCBuZXdDYXJkID0gcmVuZGVyQ2FyZChyZXMpO1xuICAgICAgY2FyZHNDb250YWluZXIuYWRkSXRlbShuZXdDYXJkKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAgIC5maW5hbGx5KGFkZEltYWdlTW9kYWwucmVuZGVyU2F2aW5nKGZhbHNlKSk7XG4gIGZvcm1WYWxpZGF0b3JzLmFkZENhcmRGb3JtLnJlc2V0Rm9ybSgpO1xuICBmb3JtVmFsaWRhdG9ycy5hZGRDYXJkRm9ybS5kaXNhYmxlU3VibWl0KCk7XG4gIGFkZEltYWdlTW9kYWwuY2xvc2UoKTtcbn1cblxuLy8tLS0tLS0tLUlNQUdFIENMSUNLIEhBTkRMRVIgRlVOQ1RJT04gVE8gUE9QVUxBVEUgUFJFVklFVyBNT0RBTC0tLS0tLS0tLS0tLS0+PlxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhuYW1lLCBsaW5rKSB7XG4gIHByZXZpZXdNb2RhbC5vcGVuKHsgbmFtZSwgbGluayB9KTtcbn1cblxuLy8tLS0tLS0tLS1QUk9GSUxFIEVESVQgTU9EQUwgRklMTCBJTlBVVFMgRlVOQ1RJT05TLS0tLS0tLS0tLS0tLS0tLS0+PlxuZnVuY3Rpb24gZmlsbFByb2ZpbGVJbnB1dHMoKSB7XG4gIGNvbnN0IHVzZXJDdXJyZW50SW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVJbnB1dExpc3RbMF0udmFsdWUgPSB1c2VyQ3VycmVudEluZm8ubmFtZTtcbiAgcHJvZmlsZUlucHV0TGlzdFsxXS52YWx1ZSA9IHVzZXJDdXJyZW50SW5mby5kZXNjcmlwdGlvbjtcbn1cblxuLy8tLS0tLS0tLS0tLUFERCBBIENMSUNLIEVWRU5UIExJU1RFTkVSIFRPIFRIRSBFRElUIEJVVFRPTi0tLS0tLS0tLS0tLT4+XG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGZpbGxQcm9maWxlSW5wdXRzKCk7XG4gIGZvcm1WYWxpZGF0b3JzLnByb2ZpbGVGb3JtLmNoZWNrVmFsaWRpdHkoKTtcbiAgcHJvZmlsZUVkaXRNb2RhbC5vcGVuKCk7XG59KTtcblxuLy8tLS0tLS0tLS0tLUFERCBBIENMSUNLIEVWRU5UIExJU1RFTkVSIFRPIFRIRSBBREQgQlVUVE9OLS0tLS0tLS0tLS0tPj5cbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gYWRkSW1hZ2VNb2RhbC5vcGVuKCkpO1xuXG4vLy0tLS0tLS0tLS0tQUREIEEgQ0xJQ0sgRVZFTlQgTElTVEVORVIgVE8gVEhFIEVESVQgUElDVFVSRSBCVVRUT04tLS0tLS0tLS0tLS0+PlxuZWRpdFBpY3R1cmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGF2YXRhckVkaXRNb2RhbC5vcGVuKCkpO1xuXG4vLy0tLS0tLS0tLS0tQUREIEVWRU5UIExJU1RFTkVSUyBUTyBUSEUgRURJVCBQUk9GSUxFIE1PREFMLS0tLS0tLS0tLS0+PlxucHJvZmlsZUVkaXRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLy0tLS0tLS0tLS0tQUREIEVWRU5UIExJU1RFTkVSUyBUTyBUSEUgQUREIElNQUdFIE1PREFMLS0tLS0tLS0tLS0+PlxuYWRkSW1hZ2VNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLy0tLS0tLS0tLS0tQUREIEVWRU5UIExJU1RFTkVSUyBUTyBUSEUgUFJFVklFVyBJTUFHRSBNT0RBTC0tLS0tLS0tLS0tPj5cbnByZXZpZXdNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLy0tLS0tLS0tLS0tQUREIEVWRU5UIExJU1RFTkVSUyBUTyBUSEUgQ0hBTkdFIFBJQ1RVUkUgTU9EQUwtLS0tLS0tLS0tLT4+XG5hdmF0YXJFZGl0TW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8tLS0tLS0tLS0tLUFERCBFVkVOVCBMSVNURU5FUlMgVE8gVEhFIERFTEVURSBDT05GSVJNQVRJT04gTU9EQUwtLS0tLS0tLS0tLT4+XG5kZWxldGVDb25maXJtYXRpb25Nb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLVVTRVJJTkZPIENPTlNUUlVDVE9SLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGRlc2NyaXB0aW9uU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRlc2NyaXB0aW9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIC8vLS0tLS0tLS1SRVRVUk5TIEFOIE9CSkVDVCBDT05UQUlOSU5HIElORk9STUFUSU9OIEFCT1VUIFRIRSBVU0VSLS0tLS0tLS0tLT4+XG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IHVzZXJDdXJyZW50SW5mbyA9IHt9O1xuICAgIHVzZXJDdXJyZW50SW5mby5uYW1lID0gdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgdXNlckN1cnJlbnRJbmZvLmRlc2NyaXB0aW9uID0gdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50O1xuICAgIHJldHVybiB1c2VyQ3VycmVudEluZm87XG4gIH1cblxuICAvLy0tLS0tLS1NRVRIT0QgVEhBVCBTRVRTIFRIRSBVU0VSIElORk8gSU4gVEhFIFBST0ZJTEUtLS0tLS0tLS0tPj5cbiAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEuZGVzY3JpcHRpb247XG4gIH1cblxuICAvLy0tLS0tLS1NRVRIT0QgVEhBVCBTRVRTIFRIRSBVU0VSIEFWQVRBUiBJTiBUSEUgUFJPRklMRS0tLS0tLS0tLS0+PlxuICBzZXRVc2VyQXZhdGFyKGxpbmspIHtcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50LnNldEF0dHJpYnV0ZShcInNyY1wiLCBsaW5rKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1BUEkgQ09OU1RSVUNUT1ItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS1NRVRIT0QgVE8gQ0hFQ0sgUkVTUE9OU0UgRlJPTSBTRVJWRVItLS0tLS0tLS0tLS0tLS0tLS0+PlxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvciA6JHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLU1FVEhPRCBUTyBHRVQgVVNFUiBJTkZPLS0tLS0tLS0tLS0tLS0tLS0tPj5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgfSk7XG4gIH1cblxuICAvLy0tLS0tLS0tLS0tLS0tLS0tTUVUSE9EIFRPIEdFVCBJTlRJQUwgQ0FSRFMtLS0tLS0tLS0tLS0tLS0tLS0+PlxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgfSk7XG4gIH1cblxuICAvLy0tLS0tLS0tLS0tLS0tLS0tTUVUSE9EIFRPIEVESVQgUFJPRklMRS0tLS0tLS0tLS0tLS0tLS0tLT4+XG4gIGVkaXRQcm9maWxlKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgYWJvdXQ6IGRlc2NyaXB0aW9uLFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLU1FVEhPRCBUTyBBREQgQ0FSRC0tLS0tLS0tLS0tLS0tLS0tLT4+XG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgbGluazogbGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS1NRVRIT0QgVE8gREVMRVRFIENBUkQtLS0tLS0tLS0tLS0tLS0tLS0+PlxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS1NRVRIT0QgVE8gTElLRSBDQVJELS0tLS0tLS0tLS0tLS0tLS0tPj5cbiAgbGlrZUNhcmQoY2FyZElkLCBpc0xpa2VkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogaXNMaWtlZCA/IFwiREVMRVRFXCIgOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgfSk7XG4gIH1cblxuICAvLy0tLS0tLS0tLS0tLS0tLS0tTUVUSE9EIFRPIENIQU5HRSBBVkFUQVItLS0tLS0tLS0tLS0tLS0tLS0+PlxuICBjaGFuZ2VBdmF0YXIoeyBsaW5rIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBNb2RhbCBmcm9tIFwiLi9Nb2RhbC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBNb2RhbCB7XG4gIC8vLS0tLS0tLS0tLS0tLS0tTU9EQUxXSVRIQ09ORklSTUFUSU9OIENPTlNUUlVDVE9SLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3RvciwgeyBzdWJtaXRCdXR0b25TZWxlY3RvciB9KSB7XG4gICAgc3VwZXIobW9kYWxTZWxlY3Rvcik7XG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX29yaWdpbmFsQnV0dG9uVGV4dCA9IHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudDtcbiAgfVxuXG4gIC8vLS0tLS0tLS0tLS0tTUVUSE9EIFRIQVQgQ0hBTkdFUyBUSEUgQlVUVE9OIFRFWFQtLS0tLS0tLS0tLS0tLT4+XG4gIHJlbmRlclNhdmluZyhpc1NhdmluZykge1xuICAgIGlzU2F2aW5nXG4gICAgICA/ICh0aGlzLl9idXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiKVxuICAgICAgOiAodGhpcy5fYnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fb3JpZ2luYWxCdXR0b25UZXh0KTtcbiAgfVxuXG4gIC8vLS0tLS0tLS0tLS0tTUVUSE9EIEZPUiBUSEUgQ0FMTEJBQ0sgT0YgVEhFIENPTkZJUk1BVElPTi0tLS0tLS0tLS0tLS0tPj5cbiAgc2V0Q2FsbGJhY2soY2FsbGJhY2spIHtcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xuICB9XG5cbiAgLy8tLS0tLS0tLUFERFMgRlVOQ1RJT05BTElUWSBUTyBUSEUgU0VURVZFTlRMSVNURU5FUlMgTUVUSE9ELS0tLS0tLS0tLT4+XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5fY2FsbGJhY2soKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJpbXBvcnQgTW9kYWwgZnJvbSBcIi4vTW9kYWwuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWxXaXRoSW1hZ2UgZXh0ZW5kcyBNb2RhbCB7XG4gIC8vLS0tLS0tLS0tLS0tLS0tTU9EQUxXSVRISU1BR0UgQ09OU1RSVUNUT1ItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxuICBjb25zdHJ1Y3Rvcihtb2RhbFNlbGVjdG9yKSB7XG4gICAgc3VwZXIobW9kYWxTZWxlY3Rvcik7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZVRpdGxlID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9faW1hZ2UtdGl0bGVcIlxuICAgICk7XG4gIH1cblxuICAvLy0tLS0tLS0tLS0tLUFERFMgRlVOQ1RJT05BTElUWSBUTyBUSEUgT1BFTiBNRVRIT0QtLS0tLS0tLS0tLS0tLT4+XG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIGxpbmspO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgbmFtZSk7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2lkIiwiaXNMaWtlZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJnZXRJZCIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfaW1hZ2VFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9saWtlQnV0dG9uIiwiX3RyYXNoQnV0dG9uIiwiZGVsZXRlQ2FyZCIsIl9lbGVtZW50IiwicmVtb3ZlIiwidG9nZ2xlTGlrZUNhcmQiLCJyZW5kZXJMaWtlQ2FyZCIsImNsYXNzTGlzdCIsImFkZCIsImdlbmVyYXRlQ2FyZCIsInNldEF0dHJpYnV0ZSIsInRleHRDb250ZW50IiwiU2VjdGlvbiIsIl9yZWYiLCJjbGFzc1NlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJlckl0ZW1zIiwicmV2ZXJzZSIsImZvckVhY2giLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsIl9lcnJvckVsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJpZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiaW5wdXRMaXN0Iiwic29tZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVTdWJtaXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJjaGVja1ZhbGlkaXR5IiwiZW5hYmxlVmFsaWRhdGlvbiIsInJlc2V0Rm9ybSIsInJlc2V0IiwiTW9kYWwiLCJtb2RhbFNlbGVjdG9yIiwiX21vZGFsRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsIl9jbG9zZUJ1dHRvbiIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJNb2RhbFdpdGhGb3JtIiwiZm9ybVN1Ym1pdCIsImZvcm1TZWxlY3RvciIsInN1cGVyIiwiX2Zvcm0iLCJfZm9ybVN1Ym1pdCIsIl9idXR0b24iLCJfb3JpZ2luYWxCdXR0b25UZXh0IiwicmVuZGVyU2F2aW5nIiwiaXNTYXZpbmciLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsInZhbHVlcyIsImNvbmZpZyIsInByb2ZpbGUiLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwiZWRpdFBpY3R1cmVCdXR0b24iLCJtb2RhbFByb2ZpbGVFZGl0IiwicHJvZmlsZUlucHV0TGlzdCIsImZvcm1MaXN0IiwiZm9ybVZhbGlkYXRvcnMiLCJjYXJkc0NvbnRhaW5lciIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25TZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2Rlc2NyaXB0aW9uRWxlbWVudCIsIl9hdmF0YXJFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJ1c2VyQ3VycmVudEluZm8iLCJkZXNjcmlwdGlvbiIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsImFwaSIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsInRoZW4iLCJnZXRJbml0aWFsQ2FyZHMiLCJlZGl0UHJvZmlsZSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJhZGRDYXJkIiwiX3JlZjIiLCJjYXJkSWQiLCJsaWtlQ2FyZCIsImNoYW5nZUF2YXRhciIsIl9yZWYzIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsInJlbmRlckNhcmQiLCJjYXJkRGF0YSIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImZvcm0iLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsImRlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsIiwic2V0Q2FsbGJhY2siLCJjYWxsYmFjayIsIl9jYWxsYmFjayIsImF2YXRhckVkaXRNb2RhbCIsImZpbmFsbHkiLCJwcm9maWxlRWRpdE1vZGFsIiwiYWRkSW1hZ2VNb2RhbCIsIm5ld0NhcmQiLCJhZGRDYXJkRm9ybSIsInByZXZpZXdNb2RhbCIsIl9wcmV2aWV3SW1hZ2UiLCJfcHJldmlld0ltYWdlVGl0bGUiLCJjYXJkIiwiZmlsbFByb2ZpbGVJbnB1dHMiLCJwcm9maWxlRm9ybSJdLCJzb3VyY2VSb290IjoiIn0=